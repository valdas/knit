<h1>A minimal CMS. </h1>
<p>
<a href="?slots">slots</a> <a href="?tags">tags</a> <a href="?queryString">queryString</a> <a href="?myrss">myrss</a> <a href="?seed">seed</a> <a href="?anyStrings">anyStrings</a> <a href="?barph">barph</a> <a href="?toc">toc</a> 
</p>
<pre>
 function penny(config) {
     return penny1("http://" config,ENVIRON["QUERY_STRING"])
 }
 function penny1(slotsFile,query,     \
                 wget,sep,values,files,titles,tags,sgat,pages,file,url,content,stem,out,between) {     
     seed()
     wget = "wget -qO - "
     sep="`""`"
     loadSlots(wget slotsFile,sep,values) # get all the short string values
     loadTags(wget values["Tags"],   files,titles,tags,sgat) # get all the page tags
     values["Content"]=""   
     if (query=="sitemap") {
         values["Header"]  = "Contents"
         values["File"]    = "?sitemap" 
         values["Content"] = join2Page(toc(files,titles,tags,sgat),"sitemap")
     } if (query=="crossIndex") {
		 values["Header"]  = "Cross-Index"
         values["File"]    = "?crossIndex" 
         values["Content"] = join2Page(mytags(files,titles,tags,sgat),"crossIndex")
</pre>
<p>
	 } else {
         values<a href=""Header"]=queryString1(query,tags,files,titles,sgat,pages)"># list pages
         if (pages[0</a> == 0)
             push(pages,values<a href=""Default"])
">        for(i=1;i<=pages[0</a>;i++) {
             file     = values<a href=""File"]">= pages[i</a>
             stem     = gensub(/.html/,"","g",file)
             url      = values<a href=""Url"]"> = values["Site"</a> "/" file
             content  = content between join2Page(fillFrame2String(wget url,sep,values),stem)
			 between  = "<br clear=all><hr>"
         } 
         values<a href=""Content"]">= content
     }
	 values["Content"</a> = values<a href=""Content"]">"<br clear=all>"
     fillFrame(wget values["Template"</a>,sep,values)     
 }
 function join2Page(content,stem) {
     return gensub(/<h1>(<a href="^<]*)<\/h1>/,
">                  "<h1><a href=\"?"stem"\">\\1</a></h1>",
                   "g",content)
 }
 function slotsPlugIns(string,values,      tmp) {   
     split(string,tmp,";")
     if (tmp[1</a>=="rss")
         return  "<p id=\"rss\">" myrss(tmp<a href="2],tmp<a href="3">3</a>,"<p">id=\"rss\">")
     if (tmp[1</a>="any")
         return anyStrings(values<a href="tmp[2]],tmp[3">tmp[2]],tmp[3</a>,1)
     barph("(" string ") ???") 
 }
</p>
<p>
by Tim Menzies
